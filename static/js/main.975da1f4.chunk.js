(this["webpackJsonpfm-todo-app-react-api"]=this["webpackJsonpfm-todo-app-react-api"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(21),o=n.n(r),s=n(22),i=n(3),l=n.n(i),u=n(7),d=n(2),b=(n(28),n(4)),p=n(5),j=(n(29),n(30),n(0)),f=["active","size","label","loading"],v=function(e){var t=e.active,n=e.size,a=e.label,c=e.loading,r=Object(p.a)(e,f);return Object(j.jsx)("button",Object(b.a)(Object(b.a)(Object(b.a)({},r),{},{type:"button",disabled:c,className:["btn","".concat(t?"btn--active":""),"btn--".concat(n),"".concat(c?"btn--loading":"")].join(" ")},r),{},{children:a}))};v.defaultProps={active:!1,loading:!1,size:"normal",onClick:void 0};var m=["onLogin","onRegister","errorMsg","loading"];function h(e){return!!(e.match(/^[A-Za-z]+$/)&&e.length>=3)}function O(e){return e.length>=7}var k=function(e){var t,n=e.onLogin,c=e.onRegister,r=e.errorMsg,o=e.loading,s=Object(p.a)(e,m),i=Object(a.useState)(""),l=Object(d.a)(i,2),u=l[0],f=l[1],k=Object(a.useState)(""),g=Object(d.a)(k,2),x=g[0],w=g[1],C=Object(a.useState)(""),N=Object(d.a)(C,2),S=N[0],T=N[1],y=Object(a.useState)(!1),F=Object(d.a)(y,2),E=F[0],D=F[1];function I(e,t){T(""),h(e)||T("The name must contain only alphabetical letters and must have a minumum length of 3 characters."),O(t)||T("The password must have a minimum length of 7 characters."),h(e)||O(t)||T("The name must contain only alphabetical letters, must have a minumum length of 3 characters and the password must have a minimum length of 7 characters.")}return Object(a.useEffect)((function(){T(r)}),[r]),Object(j.jsxs)("div",Object(b.a)(Object(b.a)({id:"login"},s),{},{onKeyDown:function(e){"Enter"===e.key&&(I(u,x),h(u)&&O(x)&&n("".concat(u,".testing@testing.com"),x))},children:[Object(j.jsxs)("div",{className:"login-card",children:[Object(j.jsx)("h1",{className:"text--title",children:"TODO"}),Object(j.jsxs)("label",{htmlFor:"login-name",className:"login-input",children:["Username",Object(j.jsx)("input",{disabled:o,type:"text",id:"login-name",placeholder:"Username",value:u,onChange:function(e){var t=e.target.value;f(t)}})]}),Object(j.jsxs)("label",{htmlFor:"login-password",className:"login-input",children:["Password",Object(j.jsx)("input",{disabled:o,type:"password",id:"login-password",placeholder:"*******",value:x,onChange:function(e){var t=e.target.value;w(t)}})]}),Object(j.jsx)("button",{disabled:o,className:"login-btn ".concat(o?"loading":""),onClick:function(){I(u,x),h(u)&&O(x)&&n("".concat(u,".testing@testing.com"),x)},children:"Login"}),Object(j.jsx)("button",{disabled:o,className:"register-btn ".concat(o?"loading":""),onClick:function(){I(u,x),h(u)&&O(x)&&c("".concat(u,".testing@testing.com"),x)},children:"Register"}),(t=S,t&&""!==t?Object(j.jsx)("div",{className:"error",children:Object(j.jsx)("p",{className:"error-msg",children:t})}):null)]}),Object(j.jsxs)("footer",{children:[Object(j.jsx)("p",{children:"Made with \u2764\ufe0f"}),Object(j.jsx)(v,{label:E?"\ud83d\ude48 Imprint":"\ud83d\udc40  Imprint",onClick:function(){D(!E)}}),E?Object(j.jsx)("div",{className:"imprint",children:Object(j.jsx)("p",{children:"https://github.com/FocusCookie/fm-todo-app-react-api"})}):null]})]}))};k.defaultProps={onLogin:void 0,onRegister:void 0,loading:!1,errorMsg:""};n(32);var g=["disabled","onAddTask"],x=function(e){var t=e.disabled,n=e.onAddTask,c=Object(p.a)(e,g),r=Object(a.useState)(""),o=Object(d.a)(r,2),s=o[0],i=o[1],l=""!==s?Object(j.jsx)("button",{disabled:t,className:"addbar-adtbtn",onClick:function(){return n(s)},children:"add"}):null;return Object(j.jsxs)("div",Object(b.a)(Object(b.a)({className:"addbar"},c),{},{children:[Object(j.jsx)("div",{className:"circle"}),Object(j.jsx)("input",{disabled:t,type:"text",id:"addTask",className:"addbar-task",placeholder:"Create a new todo..",name:"task",value:s,onChange:function(e){var t=e.target.value;i(t)},onKeyDown:function(e){"Enter"===e.key&&""!==s&&n(s)}}),l]}))};x.defaultProps={onAddTask:void 0,disabled:!1};n(33),n(34);var w=n.p+"static/media/icon-cross.6ee81d30.svg",C=n.p+"static/media/icon-check.a8fb15d0.svg",N=["task","disabled","onCompleteTask","onDeleteTask","onSaveTask"],S=function(e){var t,n=e.task,c=e.disabled,r=e.onCompleteTask,o=e.onDeleteTask,s=e.onSaveTask,i=(Object(p.a)(e,N),Object(a.useState)("")),l=Object(d.a)(i,2),u=l[0],b=l[1],f=Object(a.useState)(!1),v=Object(d.a)(f,2),m=v[0],h=v[1],O=Object(a.useState)(!1),k=Object(d.a)(O,2),g=k[0],x=k[1];Object(a.useEffect)((function(){b(n.description),h(!1)}),[n]),n.completed&&(t=Object(j.jsx)("img",{tabIndex:"1",src:C,className:"check--checked",alt:"Check a task as complete."}));var S=Object(j.jsx)("button",{disabled:c,className:"save-btn",onClick:function(){h(!0),s(n._id,u)},children:"save"});return Object(j.jsxs)("div",{className:"task ".concat(g||m?"delete-glow":""),children:[Object(j.jsx)("button",{disabled:c,className:"checkbox ".concat(n.completed?"checkbox-bg":""," ").concat(n.completed?"":"check--unchecked"),onClick:function(){h(!0),r(n._id,!n.completed)},children:t}),Object(j.jsx)("input",{disabled:c,type:"text",id:"description-".concat(n._id),className:"description ".concat(n.completed?"text--checked":""),name:"description",value:u,onChange:function(e){b(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&""!==e.target.value&&(h(!0),s(n._id,u))}}),n.description!==u?S:null,Object(j.jsx)("div",{onClick:function(e){return e.stopPropagation()},children:Object(j.jsx)("button",{disabled:c,className:"delete",onClick:function(){x(!0),o(n._id)},children:Object(j.jsx)("img",{src:w,className:"delete-icon",alt:"Delete task."})})})]})};S.defaultProps={disabled:void 0,onClick:void 0,onCompleteTask:void 0,onDeleteTask:void 0,onSaveTask:void 0};var T=["tasks","loading","disabled","onCompleteTask","onDeleteTask","onSaveTask"],y=function(e){var t,n=e.tasks,a=e.loading,c=e.disabled,r=e.onCompleteTask,o=e.onDeleteTask,s=e.onSaveTask,i=(Object(p.a)(e,T),{onCompleteTask:r,onDeleteTask:o,onSaveTask:s});return Object(j.jsx)("div",{className:"Tasklist",children:(t=a,t?Object(j.jsxs)("div",{className:"loader",children:[Object(j.jsx)("div",{className:"loader-item"}),Object(j.jsx)("div",{className:"loader-item"}),Object(j.jsx)("div",{className:"loader-item"})]}):n.length>0?n.map((function(e){return Object(j.jsx)(S,Object(b.a)({disabled:c,className:"task",task:e},i),"task-".concat(e._id))})):Object(j.jsx)("div",{className:"no-tasks",children:"No Tasks to display \ud83d\ude22"}))})};y.defaultProps={loading:!0,onCompleteTask:void 0,onDeleteTask:void 0,onSaveTask:void 0};n(35),n(36);var F=["activeFilter","onSetFilter"],E=function(e){var t=e.activeFilter,n=e.onSetFilter,a=Object(p.a)(e,F);return Object(j.jsxs)("div",Object(b.a)(Object(b.a)({},a),{},{className:"filter",children:[Object(j.jsx)(v,{label:"All",active:"all"===t,onClick:function(){return n("all")}}),Object(j.jsx)(v,{label:"Active",active:"active"===t,onClick:function(){return n("active")}}),Object(j.jsx)(v,{label:"Completed",active:"completed"===t,onClick:function(){return n("completed")}})]}))};E.defaultProps={activeFilter:"none",onSetFilter:void 0};var D=["tasksLeft","activeFilter","onSetFilter","onClearCompleted"],I=function(e){var t=e.tasksLeft,n=e.activeFilter,a=e.onSetFilter,c=e.onClearCompleted,r=Object(p.a)(e,D);return Object(j.jsxs)("div",Object(b.a)(Object(b.a)({},r),{},{className:"overview",children:[Object(j.jsx)("span",{children:"".concat(t," tasks")}),Object(j.jsx)("div",{className:"overview-filterbar",children:Object(j.jsx)(E,{onSetFilter:function(e){return a(e)},activeFilter:n})}),Object(j.jsx)(v,{label:"Clear Completed",size:"small",onClick:function(){return c()}})]}))};I.defaultProps={tasksLeft:0,activeFilter:"none",onClearCompleted:void 0,onSetFilter:void 0};var L=n.p+"static/media/icon-moon.6c03114b.svg",P=n.p+"static/media/icon-sun.910b1f9a.svg",A=n(37).default.create({baseURL:"https://api-nodejs-todolist.herokuapp.com/"});function _(){var e=localStorage.getItem("token");""!==e&&(A.defaults.headers.common.Authorization="Bearer ".concat(e))}var M=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={email:t,password:n,name:t.split(".")[0],age:21},e.next=4,A.post("user/register",a);case 4:return c=e.sent,e.abrupt("return",c.data);case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n.length<7)){e.next=3;break}throw new Error("Password length needs to be 7 chars minimum");case 3:return a={email:"".concat(t),password:n},e.next=6,A.post("user/login",a);case 6:return c=e.sent,e.abrupt("return",c.data);case 10:throw e.prev=10,e.t0=e.catch(0),new Error(e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(),e.next=4,A.post("user/logout");case 4:return e.abrupt("return",!0);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(),e.next=4,A.get("task/");case 4:return t=e.sent,e.abrupt("return",t.data);case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("Api: addTask - no task given");case 3:return _(),e.next=6,A.post("task/",{description:"".concat(t)});case 6:return n=e.sent,e.abrupt("return",n.data);case 10:throw e.prev=10,e.t0=e.catch(0),new Error(e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(u.a)(l.a.mark((function e(t,n,a){var c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("Api: updateTask - no task given");case 3:return c={},void 0===n&&null===n||(c.completed=n),a&&(c.description=a),_(),e.next=9,A.put("task/".concat(t),c);case 9:return r=e.sent,e.abrupt("return",r.data.data);case 13:throw e.prev=13,e.t0=e.catch(0),new Error(e.t0.response.data);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,a){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.a)(l.a.mark((function e(t,n,a){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("Api: deleteTask - no task given");case 3:return _(),e.next=6,A.delete("task/".concat(t));case 6:return c=e.sent,e.abrupt("return",c.data);case 10:throw e.prev=10,e.t0=e.catch(0),new Error(e.t0.response.data);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,a){return e.apply(this,arguments)}}();var Z=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),o=Object(d.a)(r,2),i=o[0],b=o[1],p=Object(a.useState)(!1),f=Object(d.a)(p,2),m=f[0],h=f[1],O=Object(a.useState)(!1),g=Object(d.a)(O,2),w=g[0],C=g[1],N=Object(a.useState)(!1),S=Object(d.a)(N,2),T=S[0],F=S[1],D=Object(a.useState)(!1),A=Object(d.a)(D,2),_=A[0],Z=A[1],$=Object(a.useState)("all"),q=Object(d.a)($,2),G=q[0],H=q[1],Q=Object(a.useState)([]),V=Object(d.a)(Q,2),W=V[0],X=V[1],Y=Object(a.useState)(!1),ee=Object(d.a)(Y,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(""),ce=Object(d.a)(ae,2),re=ce[0],oe=ce[1];function se(e,t){var n;return"all"===t&&(n=e.slice()),"active"===t&&(n=e.filter((function(e){return!e.completed}))),"completed"===t&&(n=e.filter((function(e){return e.completed}))),n}return Object(a.useEffect)((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B().then((function(e){b(e.data),X(e.data),F(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=localStorage.getItem("token");t&&""!==t?(C(!0),F(!0),e()):C(!1)}),[w]),Object(j.jsxs)("div",{className:"app bg-picture ".concat(n?"bg-picture-dark":"bg-picture-light"," ").concat(n?"dark-theme":""),children:[Object(j.jsxs)("div",{className:"content-wrapper",children:[Object(j.jsxs)("header",{className:"App-header",children:[Object(j.jsx)("h1",{className:"text--title",children:"TODO"}),Object(j.jsxs)("div",{className:"header-controls",children:[Object(j.jsx)("button",{className:"theme-btn",onClick:function(){c((function(e){return!e}))},children:Object(j.jsx)("img",{className:"theme-icon",src:n?P:L,alt:n?"Sun Icon - Dark Mode is enabled":"Moon Icon - Light Mode is enabled"})}),Object(j.jsx)("div",{className:"btn-logout-wrapper",children:Object(j.jsx)(v,{label:"Logout",onClick:function(){R(),localStorage.removeItem("token"),b([]),X([]),C(!1)}})})]})]}),Object(j.jsx)("section",{className:"card addTaskBar ".concat(_?"loading-add-task":""),children:Object(j.jsx)(x,{disabled:_||T,onAddTask:function(e){Z(!0),U(e).then((function(e){var t,n=[].concat(Object(s.a)(i),[e.data]);b(n),"all"===G&&(t=n.slice()),"active"===G&&(t=n.filter((function(e){return!e.completed}))),"completed"===G&&(t=n.filter((function(e){return e.completed}))),X(t),Z(!1)})).catch((function(e){Z(!1),console.log(e)}))}})}),Object(j.jsxs)("section",{className:"card",children:[Object(j.jsx)(y,{tasks:W,disabled:te,loading:T,onCompleteTask:function(e,t){te||(ne(!0),K(e,t).then((function(t){var n=i.slice(),a=n.findIndex((function(t){return t._id===e}));n[a]=t,b(n),X(se(n,G)),ne(!1)})))},onDeleteTask:function(e){te||(ne(!0),J(e).then((function(){var t=i.filter((function(t){return t._id!==e}));b(t),X(se(t,G)),ne(!1)})))},onSaveTask:function(e,t){if(!te){ne(!0);var n=i.find((function(t){return t._id===e}));K(e,n.completed,t).then((function(t){var n=i.slice(),a=n.findIndex((function(t){return t._id===e}));n[a]=t,b(n),X(se(n,G)),ne(!1)}))}}}),T?null:Object(j.jsxs)("div",{className:"tasks-overview",children:[Object(j.jsx)(I,{tasksLeft:W.length,activeFilter:G,onSetFilter:function(e){H(e),X(se(i,e))},onClearCompleted:Object(u.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te||(ne(!0),t=i.filter((function(e){return!e.completed})),n=i.filter((function(e){return e.completed})),a=n.map((function(e){return J(e._id)})),Promise.all(a).then((function(){b(t),X(se(t,G)),ne(!1)})));case 1:case"end":return e.stop()}}),e)})))})," "]})]}),T?null:Object(j.jsx)("section",{className:"app-filterbar card",children:Object(j.jsx)(E,{activeFilter:G,onSetFilter:function(e){var t;H(e),"all"===e&&(t=i.slice()),"active"===e&&(t=i.filter((function(e){return!e.completed}))),"completed"===e&&(t=i.filter((function(e){return e.completed}))),X(t)}})})]}),w?null:Object(j.jsx)(k,{loading:m,errorMsg:re,onRegister:function(e,t){oe(""),h(!0),M(e,t).then((function(e){localStorage.setItem("token",e.token),h(!1),C(!0)})).catch((function(e){h(!1),oe(e.message),console.log(e)}))},onLogin:function(e,t){oe(""),h(!0),z(e,t).then((function(e){localStorage.setItem("token",e.token),h(!1),C(!0)})).catch((function(e){h(!1),oe("Unable to login."),console.log(e)}))}})]})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,58)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};n(56);o.a.render(Object(j.jsxs)(c.a.StrictMode,{children:[Object(j.jsx)("style",{jsx:"true",global:"true",children:"\n      html {\n        height: 100vh;\n      }\n      body {\n        min-height: 100%;\n        margin: 0px;\n        padding: 0px;\n      }\n    "}),Object(j.jsx)(Z,{})]}),document.getElementById("root")),$()}},[[57,1,2]]]);
//# sourceMappingURL=main.975da1f4.chunk.js.map